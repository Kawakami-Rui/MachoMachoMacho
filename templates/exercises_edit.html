{% extends 'base.html' %}

{% block title %}筋トレ種目一覧{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/exercises_edit.css') }}">
{% endblock %}

{% block content %}

<h2 style="display: flex; justify-content: space-between; align-items: center;">
    <span>筋トレ種目一覧</span>

    <span>
        <button id="edit-mode-toggle">編集</button>
    </span>
</h2>

<div style="display: flex; font-weight: bold; padding: 4px 0;">
    <div style="flex: 1;">主な筋肉部位</div>
    <div style="flex: 1;">種目名</div>
    <div style="flex: 1;">詳細な筋肉部位</div>
    <div id="operation-header" style="flex: 0 0 100px; display: none;"></div>
</div>

{% for category, exercises in grouped_exercises.items() %}
    <div class="main-group-section">
        <div style="font-weight: bold; padding: 6px 0;">
            {{ category }}
        </div>
        <div class="exercise-list">
            {% if exercises %}
                {% for exercise in exercises %}
                <div style="display: flex; padding: 4px 0;" data-id="{{ exercise.id }}">
                    <div style="flex: 1;"></div>
                    <div style="flex: 1;">{{ exercise.name }}</div>
                    <div style="flex: 1;">{{ exercise.detail }}</div>
                    <div class="operation-cell" style="flex: 0 0 100px; display: none; gap: 4px;">
                        <button class="move-up">↑</button>
                        <button class="move-down">↓</button>
                        <button class="delete">削除</button>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-entry" style="display: flex; padding: 4px 0; font-style: italic; color: #666;">
                    <div style="flex: 1;"></div>
                    <div style="flex: 2;">（登録なし）</div>
                    <div id="operation-header" style="flex: 0 0 100px; display: none;"></div>
                </div>
            {% endif %}

            <div class="add-button" style="display: none; text-align: right;">
                <button class="add-exercise-button" data-category="{{ category }}">＋追加</button>
            </div>

        </div>
    </div>    
{% endfor %}

<p><a href="{{ url_for('index') }}">← トップメニューへ戻る</a></p>

<script src="{{ url_for('static', filename='js/exercises_edit.js') }}"></script>
{% endblock %}
