<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>BMI入力フォーム</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        // 日付から曜日（日本語）を求めてセレクトボックスに反映する関数
        function updateDayFromDate() {
            const dateInput = document.querySelector('input[name="date"]');
            const daySelect = document.querySelector('select[name="day"]');

            if (!dateInput || !daySelect) return;

            const dateValue = dateInput.value;
            if (!dateValue) return;

            const date = new Date(dateValue);
            const days = ['日', '月', '火', '水', '木', '金', '土'];
            const day = days[date.getDay()];

            // セレクトボックスの選択肢を更新
            for (let i = 0; i < daySelect.options.length; i++) {
                if (daySelect.options[i].value === day) {
                    daySelect.selectedIndex = i;
                    break;
                }
            }
        }

        // ページ読み込み後にイベントを設定
        window.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.querySelector('input[name="date"]');
            if (dateInput) {
                dateInput.addEventListener('change', updateDayFromDate);
            }
        });
    </script>
</head>
<body>
    <h1>BMI記録 - 日付と曜日</h1>
    <form method="POST" action="/submit">
        <label>日付:
            <input type="date" name="date" required>
        </label>
        <br><br>
        <label>曜日:
            <select name="day" required>
                <option value="">選択してください</option>
                <option value="月">月</option>
                <option value="火">火</option>
                <option value="水">水</option>
                <option value="木">木</option>
                <option value="金">金</option>
                <option value="土">土</option>
                <option value="日">日</option>
            </select>
        </label>
        <br><br>
        <label>重量 (kg):
            <input type="number" name="weight" step="0.1" required>
        </label>
        <br><br>
        <label>１セットあたりの回数 (回):
            <input type="number" name="reps" step="0.1" required>
        </label>
        <br><br>
        <label>セット数 (回):
            <input type="number" name="sets" step="0.1" required>
        </label>
        <br><br>
        <button type="submit">送信</button>
    </form>

    <br>
    <a href="/graph">▶ グラフを表示する</a>
    <br>
    <a href="/records">📋 記録一覧を見る</a>
</body>
</html>